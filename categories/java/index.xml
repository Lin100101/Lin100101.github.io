<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Java on Lin100101</title>
        <link>https://Lin100101.github.io/categories/java/</link>
        <description>Recent content in Java on Lin100101</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Lin100101</copyright>
        <lastBuildDate>Thu, 04 Dec 2025 07:06:09 +0800</lastBuildDate><atom:link href="https://Lin100101.github.io/categories/java/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Java 中创建对象的过程</title>
        <link>https://Lin100101.github.io/p/java-%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%BF%87%E7%A8%8B/</link>
        <pubDate>Thu, 04 Dec 2025 07:06:09 +0800</pubDate>
        
        <guid>https://Lin100101.github.io/p/java-%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%BF%87%E7%A8%8B/</guid>
        <description>&lt;img src="https://Lin100101.github.io/p/java-%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%BF%87%E7%A8%8B/class.jpg" alt="Featured image of post Java 中创建对象的过程" /&gt;&lt;p&gt;在 Java 中，&lt;strong&gt;创建对象（Object Creation）&lt;/strong&gt; 是指在堆内存（Heap）中分配一块空间，用于存放某个类的实例（instance），并对其进行初始化。这是面向对象编程的核心操作之一。&lt;/p&gt;
&lt;p&gt;我们先看一个简单的例子：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这两行代码中，&lt;strong&gt;哪一行创建了对象？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;答案是：&lt;strong&gt;都没有！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;虽然 &lt;code&gt;Integer&lt;/code&gt; 是 &lt;code&gt;int&lt;/code&gt; 的包装类，但 &lt;code&gt;int a;&lt;/code&gt; 和 &lt;code&gt;Integer b;&lt;/code&gt; 有着本质区别：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;int a;&lt;/code&gt; → 声明了一个&lt;strong&gt;基本类型变量&lt;/strong&gt;，它不是对象；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Integer b;&lt;/code&gt; → 声明了一个&lt;strong&gt;引用类型变量&lt;/strong&gt;，它可以指向一个 &lt;code&gt;Integer&lt;/code&gt; 对象，但此时&lt;strong&gt;并未创建任何对象&lt;/strong&gt;，其值为 &lt;code&gt;null&lt;/code&gt;（如果是成员变量）或未初始化（如果是局部变量）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这就引出了 Java 中两个核心概念：&lt;/p&gt;
&lt;h2 id=&#34;基本类型-vs-引用类型&#34;&gt;基本类型 vs 引用类型
&lt;/h2&gt;&lt;p&gt;Java 的数据类型分为两大类：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;类型&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;基本类型（Primitive Types）&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;不是对象，直接存储值，效率高&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;int&lt;/code&gt;, &lt;code&gt;double&lt;/code&gt;, &lt;code&gt;boolean&lt;/code&gt;, &lt;code&gt;char&lt;/code&gt; 等&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;引用类型（Reference Types）&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;表示对对象的引用（即“指针”）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;String&lt;/code&gt;, &lt;code&gt;Integer&lt;/code&gt;, 自定义类如 &lt;code&gt;Person&lt;/code&gt; 等&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;因此：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;int a;&lt;/code&gt; 只是声明了一个用于存储整数值的变量；&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Integer b;&lt;/code&gt; 虽然是引用类型，但&lt;strong&gt;仅声明了引用，并未创建对象&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;只有&lt;strong&gt;引用类型&lt;/strong&gt;才能指向对象，而要真正拥有一个对象，还需要&lt;strong&gt;显式地创建它&lt;/strong&gt;。&lt;/p&gt;
&lt;h2 id=&#34;java-中创建对象的标准流程&#34;&gt;Java 中创建对象的标准流程
&lt;/h2&gt;&lt;p&gt;当使用 &lt;code&gt;new&lt;/code&gt; 关键字创建对象时，JVM 会按以下顺序执行：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;检查类是否已加载 → 在堆中分配内存 → 字段设为默认值 → 填充对象头信息 → 调用构造器 &lt;code&gt;&amp;lt;init&amp;gt;&lt;/code&gt; 进行显式初始化&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;具体步骤如下：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;步骤&lt;/th&gt;
          &lt;th&gt;阶段&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;类加载检查&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;JVM 检查该类是否已被加载；若未加载，则先完成加载、链接（验证、准备、解析）和初始化。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;分配内存&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;在堆中为对象分配所需大小的内存空间（大小由所有实例字段决定）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;零初始化&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;将所有实例字段设置为默认值（如 &lt;code&gt;int → 0&lt;/code&gt;，&lt;code&gt;Object → null&lt;/code&gt;，&lt;code&gt;boolean → false&lt;/code&gt;）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;设置对象头&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;填充对象头信息，包括：指向类元数据的指针、哈希码（延迟初始化）、GC 分代年龄、锁状态等。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;执行构造器&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;调用 &lt;code&gt;&amp;lt;init&amp;gt;&lt;/code&gt; 方法（即你编写的构造函数），执行自定义的初始化逻辑。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;完成后，&lt;code&gt;new&lt;/code&gt; 表达式返回该对象在堆中的引用。&lt;/p&gt;
&lt;h3 id=&#34;integer-b-处于哪个步骤&#34;&gt;&lt;code&gt;Integer b;&lt;/code&gt; 处于哪个步骤？
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;它不属于上述任何一个步骤。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;因为 &lt;code&gt;Integer b;&lt;/code&gt; &lt;strong&gt;只是声明了一个引用变量&lt;/strong&gt;，并没有触发对象的创建流程。&lt;br&gt;
你可以把它理解为：“我预留了一个‘指针槽位’，但还没指向任何实际对象。”&lt;/p&gt;
&lt;p&gt;只有当你写出如下代码时，才会进入对象创建流程：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 显式创建新对象（不推荐）&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;valueOf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 推荐方式，可能复用缓存&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                   &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 自动装箱，等价于 valueOf(10)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;什么才算创建对象&#34;&gt;什么才算“创建对象”？
&lt;/h3&gt;&lt;p&gt;在 Java 中，&lt;strong&gt;只有当在堆内存中分配了空间，并完成初始化后，才算是真正创建了一个对象&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;常见的创建方式包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;new&lt;/code&gt; 关键字（最常用）&lt;/li&gt;
&lt;li&gt;反射（如 &lt;code&gt;Class.newInstance()&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;克隆（&lt;code&gt;clone()&lt;/code&gt; 方法）&lt;/li&gt;
&lt;li&gt;反序列化（&lt;code&gt;ObjectInputStream.readObject()&lt;/code&gt;）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;而以下情况&lt;strong&gt;不一定创建新对象&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基本类型变量（如 &lt;code&gt;int a&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;未初始化的引用（如 &lt;code&gt;Integer b;&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;自动装箱时使用缓存（如 &lt;code&gt;Integer b = 100;&lt;/code&gt;，值在 &lt;code&gt;-128~127&lt;/code&gt; 范围内）&lt;/li&gt;
&lt;li&gt;字符串字面量（如 &lt;code&gt;String s = &amp;quot;hello&amp;quot;;&lt;/code&gt; —— 会创建对象，但放入字符串常量池，且可能复用）&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;特别说明：&lt;code&gt;String s = &amp;quot;hello&amp;quot;;&lt;/code&gt; 确实会创建 &lt;code&gt;String&lt;/code&gt; 对象（如果常量池中尚不存在），但它&lt;strong&gt;不是通过 &lt;code&gt;new&lt;/code&gt; 创建的&lt;/strong&gt;，而是由 JVM 在类加载阶段处理。&lt;/p&gt;&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;总结&#34;&gt;总结
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;int a;&lt;/code&gt;：基本类型，&lt;strong&gt;不是对象&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Integer b;&lt;/code&gt;：引用类型，&lt;strong&gt;声明了引用，但未创建对象&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;真正的对象创建&lt;/strong&gt;必须经过 JVM 的五步流程，通常由 &lt;code&gt;new&lt;/code&gt; 触发。&lt;/li&gt;
&lt;li&gt;理解“声明”与“创建”的区别，是掌握 Java 内存模型和面向对象机制的关键一步。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Hello</title>
        <link>https://Lin100101.github.io/p/hello/</link>
        <pubDate>Wed, 12 Nov 2025 12:15:12 +0800</pubDate>
        
        <guid>https://Lin100101.github.io/p/hello/</guid>
        <description>&lt;h3 id=&#34;hello&#34;&gt;hello
&lt;/h3&gt;</description>
        </item>
        
    </channel>
</rss>
